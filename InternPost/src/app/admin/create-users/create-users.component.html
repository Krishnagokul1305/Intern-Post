<div class="px-10 py-5 space-y-5">
  <header class="flex items-center justify-between">
    <h1 class="font-bold text-xl text-grey-400">Create Users</h1>
  </header>
  <div class="bg-grey-900 p-8 rounded-lg shadow-lg w-full">
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        
        <!-- Reg No Field -->
        <div class="space-y-2">
          <label for="reg_no" class="block text-grey-400">Reg No</label>
          <input
            type="text"
            id="reg_no"
            formControlName="RegNo"
            placeholder="Enter registration number"
            class="mt-1 block w-full bg-grey-700 text-grey-100 px-4 py-3 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('RegNo')?.invalid && signupForm.get('RegNo')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('RegNo')?.hasError('required')">Registration number is required</small>
          </div>
        </div>

        <!-- FullName Field -->
        <div class="space-y-2">
          <label for="name" class="block text-grey-400">FullName</label>
          <input
            type="text"
            id="name"
            formControlName="fullName"
            placeholder="Enter your name"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('fullName')?.invalid && signupForm.get('fullName')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('fullName')?.hasError('required')">Name is required</small>
            <small *ngIf="signupForm.get('fullName')?.hasError('minlength')">Name must be at least 3 characters</small>
          </div>
        </div>

        <!-- Email Field -->
        <div class="space-y-2">
          <label for="email" class="block text-grey-400">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Enter your email"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('email')?.hasError('required')">Email is required</small>
            <small *ngIf="signupForm.get('email')?.hasError('email')">Enter a valid email</small>
          </div>
        </div>

        <!-- Phone No Field -->
        <div class="space-y-2">
          <label for="phone_no" class="block text-grey-400">Phone No</label>
          <input
            type="text"
            id="phone_no"
            formControlName="phoneNo"
            placeholder="Enter your phone number"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('phoneNo')?.invalid && signupForm.get('phoneNo')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('phoneNo')?.hasError('required')">Phone number is required</small>
            <small *ngIf="signupForm.get('phoneNo')?.hasError('pattern')">Enter a valid 10-digit phone number</small>
          </div>
        </div>

        <!-- Password Field -->
        <div class="space-y-2">
          <label for="password" class="block text-grey-400">Password</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Enter a password"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('password')?.invalid && signupForm.get('password')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('password')?.hasError('required')">Password is required</small>
            <small *ngIf="signupForm.get('password')?.hasError('minlength')">Password must be at least 6 characters</small>
          </div>
        </div>

        <!-- Confirm Password Field -->
        <div class="space-y-2">
          <label for="confirm_password" class="block text-grey-400">Confirm Password</label>
          <input
            type="password"
            id="confirm_password"
            formControlName="confirmPassword"
            placeholder="Confirm your password"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('confirmPassword')?.invalid && signupForm.get('confirmPassword')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('confirmPassword')?.hasError('required')">Please confirm your password</small>
          </div>
        </div>

        <!-- Department Field -->
        <div class="space-y-2">
          <label for="dep" class="block text-grey-400">Department</label>
          <input
            type="text"
            id="dep"
            formControlName="dep"
            placeholder="Enter department"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('dep')?.invalid && signupForm.get('dep')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('dep')?.hasError('required')">Department is required</small>
          </div>
        </div>

        <!-- Role Field -->
        <div class="space-y-2">
          <label for="role" class="block text-grey-400">Role</label>
          <select
            id="role"
            formControlName="role"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
            (change)="onRoleChange()"
          >
            <option value="student">Student</option>
            <option value="faculty">Faculty</option>
          </select>
          <div *ngIf="signupForm.get('role')?.invalid && signupForm.get('role')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('role')?.hasError('required')">Role is required</small>
          </div>
        </div>

        <!-- Batch Field (Conditional) -->
        <div class="space-y-2" *ngIf="isStudent">
          <label for="batch" class="block text-grey-400">Batch</label>
          <input
            type="text"
            id="batch"
            formControlName="batch"
            placeholder="Enter batch"
            class="mt-1 block w-full px-4 py-3 bg-grey-700 text-grey-100 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-500"
          />
          <div *ngIf="signupForm.get('batch')?.invalid && signupForm.get('batch')?.touched" class="text-red-500">
            <small *ngIf="signupForm.get('batch')?.hasError('required')">Batch is required for students</small>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="flex items-center mt-8">
        <button
          type="submit"
          [disabled]="isLoading"
          class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-500 ms-auto"
        >
          {{ isLoading ? "Registering..." : "Register" }}
        </button>
      </div>
    </form>
  </div>
</div>
